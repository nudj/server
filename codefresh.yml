version: '1.0'

steps:

  build_image:
    title: Building Image
    type: build
<<<<<<< Updated upstream
    image_name: nudj/service
    tag: 0.1.0
=======
    image_name: nudj/server
    tag: 0.2.0
>>>>>>> Stashed changes
    working_directory: ${{main_clone}}
    dockerfile: Dockerfile

  push_to_registry:
    title: Push to registry
    type: push
    candidate: '${{build_image}}'
<<<<<<< Updated upstream
    tag: 0.1.0
    credentials:
      username: '${{dockerUsername}}'
      password: '${{dockerPassword}}'
=======
    tag: 0.2.0
    provider: 'ecr'
    registry: ${{AWS_REGISTRY}}
    accessKeyId: ${{AWS_ACCESS_KEY}}
    secretAccessKey: ${{AWS_SECRET_KEY}}
    region: ${{AWS_REGION}}
    when:
      branch:
        only:
          - master
>>>>>>> Stashed changes
